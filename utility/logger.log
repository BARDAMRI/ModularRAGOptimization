2025-07-14 15:13:35,237 - WARNING - Failed to create cache directory cache/embeddings: 'str' object has no attribute 'mkdir'
2025-07-14 15:13:35,238 - WARNING - Failed to create cache directory cache/queries: 'str' object has no attribute 'mkdir'
2025-07-14 15:13:35,238 - WARNING - Failed to create cache directory cache: 'str' object has no attribute 'mkdir'
2025-07-14 15:13:35,877 - INFO - MPS environment configured for compatibility
2025-07-14 15:13:35,877 - INFO - Application started with enhanced MPS support.
2025-07-14 15:13:35,878 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:13:35,878 - INFO - Loading Model tiiuae/falcon-rw-1b with MPS compatibility...
2025-07-14 15:13:35,878 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:13:36,505 - INFO - Added padding token to tokenizer.
2025-07-14 15:13:36,505 - INFO - Tokenizer loaded successfully.
2025-07-14 15:13:36,505 - INFO - Loading model with MPS-specific optimizations...
2025-07-14 15:13:43,882 - INFO - Model successfully loaded and converted for MPS
2025-07-14 15:13:43,883 - INFO - Model loading completed successfully
2025-07-14 15:13:43,884 - INFO - Performance complete_model_loading: 8.01s, Memory: -405.8MB, GPU: +0.0MB
2025-07-14 15:13:43,884 - INFO - Performance startup_model_loading: 8.01s, Memory: -405.4MB, GPU: +0.0MB
2025-07-14 15:17:06,367 - INFO - Application interrupted by user
2025-07-14 15:17:06,369 - INFO - Performance metrics saved to results/performance_metrics.json
2025-07-14 15:17:06,369 - INFO - Performance metrics saved
2025-07-14 15:17:06,369 - INFO - MPS cache cleared
2025-07-14 15:17:16,894 - WARNING - Failed to create cache directory cache/embeddings: 'str' object has no attribute 'mkdir'
2025-07-14 15:17:16,895 - WARNING - Failed to create cache directory cache/queries: 'str' object has no attribute 'mkdir'
2025-07-14 15:17:16,895 - WARNING - Failed to create cache directory cache: 'str' object has no attribute 'mkdir'
2025-07-14 15:17:17,486 - INFO - MPS environment configured for compatibility
2025-07-14 15:17:17,487 - INFO - Application started with enhanced MPS support.
2025-07-14 15:17:17,487 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:17:17,487 - INFO - Loading Model tiiuae/falcon-rw-1b with MPS compatibility...
2025-07-14 15:17:17,487 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:17:18,353 - INFO - Added padding token to tokenizer.
2025-07-14 15:17:18,354 - INFO - Tokenizer loaded successfully.
2025-07-14 15:17:18,354 - INFO - Loading model with MPS-specific optimizations...
2025-07-14 15:17:25,227 - INFO - Model successfully loaded and converted for MPS
2025-07-14 15:17:25,229 - INFO - Model loading completed successfully
2025-07-14 15:17:25,230 - INFO - Performance complete_model_loading: 7.74s, Memory: -299.4MB, GPU: +0.0MB
2025-07-14 15:17:25,230 - INFO - Performance startup_model_loading: 7.74s, Memory: -299.3MB, GPU: +0.0MB
2025-07-14 15:19:44,135 - INFO - Performance metrics saved to results/performance_metrics.json
2025-07-14 15:19:44,135 - INFO - Performance metrics saved
2025-07-14 15:19:44,135 - INFO - MPS cache cleared
2025-07-14 15:19:54,708 - WARNING - Failed to create cache directory cache/embeddings: 'str' object has no attribute 'mkdir'
2025-07-14 15:19:54,708 - WARNING - Failed to create cache directory cache/queries: 'str' object has no attribute 'mkdir'
2025-07-14 15:19:54,708 - WARNING - Failed to create cache directory cache: 'str' object has no attribute 'mkdir'
2025-07-14 15:19:55,298 - INFO - MPS environment configured for compatibility
2025-07-14 15:19:55,298 - INFO - Application started with enhanced MPS support.
2025-07-14 15:19:55,298 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:19:55,299 - INFO - Loading Model tiiuae/falcon-rw-1b with MPS compatibility...
2025-07-14 15:19:55,299 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:19:55,889 - INFO - Added padding token to tokenizer.
2025-07-14 15:19:55,889 - INFO - Tokenizer loaded successfully.
2025-07-14 15:19:55,889 - INFO - Loading model with MPS-specific optimizations...
2025-07-14 15:20:02,435 - INFO - Model successfully loaded and converted for MPS
2025-07-14 15:20:02,437 - INFO - Model loading completed successfully
2025-07-14 15:20:02,438 - INFO - Performance complete_model_loading: 7.14s, Memory: -145.0MB, GPU: +0.0MB
2025-07-14 15:20:02,438 - INFO - Performance startup_model_loading: 7.14s, Memory: -145.0MB, GPU: +0.0MB
2025-07-14 15:28:17,920 - INFO - Performance metrics saved to results/performance_metrics.json
2025-07-14 15:28:17,920 - INFO - Performance metrics saved
2025-07-14 15:28:17,920 - INFO - MPS cache cleared
2025-07-14 15:36:36,492 - WARNING - Failed to create cache directory cache/embeddings: 'str' object has no attribute 'mkdir'
2025-07-14 15:36:36,493 - WARNING - Failed to create cache directory cache/queries: 'str' object has no attribute 'mkdir'
2025-07-14 15:36:36,493 - WARNING - Failed to create cache directory cache: 'str' object has no attribute 'mkdir'
2025-07-14 15:36:37,264 - INFO - MPS environment configured for compatibility
2025-07-14 15:36:37,264 - INFO - Application started with enhanced MPS support.
2025-07-14 15:36:37,264 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:36:37,264 - INFO - Loading Model tiiuae/falcon-rw-1b with MPS compatibility...
2025-07-14 15:36:37,264 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:36:37,963 - INFO - Added padding token to tokenizer.
2025-07-14 15:36:37,963 - INFO - Tokenizer loaded successfully.
2025-07-14 15:36:37,963 - INFO - Loading model with MPS-specific optimizations...
2025-07-14 15:36:44,899 - INFO - Model successfully loaded and converted for MPS
2025-07-14 15:36:44,899 - INFO - Model loading completed successfully
2025-07-14 15:36:44,900 - INFO - Performance complete_model_loading: 7.64s, Memory: -379.0MB, GPU: +0.0MB
2025-07-14 15:36:44,901 - INFO - Performance startup_model_loading: 7.64s, Memory: -378.6MB, GPU: +0.0MB
2025-07-14 15:37:28,274 - INFO - User selected configuration: method=simple, source=wikipedia:20220301.en
2025-07-14 15:37:31,573 - INFO - Loading Vector DB with method: simple, source: wikipedia:20220301.en
2025-07-14 15:37:33,465 - INFO - Loading vector database for source_path: 'wikipedia:20220301.en', storing_method: 'simple'
2025-07-14 15:37:33,465 - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-07-14 15:37:33,465 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:37:33,465 - INFO - Loading SentenceTransformer for MPS with float32
2025-07-14 15:37:37,667 - ERROR - Failed to load embedding model: model is deprecated. Please remove it from the arguments.
2025-07-14 15:37:39,777 - INFO - Performance vector_db_loading: 8.85s, Memory: +61.6MB, GPU: +0.0MB
2025-07-14 15:38:06,410 - ERROR - Failed to load vector DB: model is deprecated. Please remove it from the arguments.
2025-07-14 15:38:30,555 - INFO - Application interrupted by user
2025-07-14 15:38:30,557 - INFO - Performance metrics saved to results/performance_metrics.json
2025-07-14 15:38:30,557 - INFO - Performance metrics saved
2025-07-14 15:38:30,557 - INFO - MPS cache cleared
2025-07-14 15:38:41,878 - WARNING - Failed to create cache directory cache/embeddings: 'str' object has no attribute 'mkdir'
2025-07-14 15:38:41,879 - WARNING - Failed to create cache directory cache/queries: 'str' object has no attribute 'mkdir'
2025-07-14 15:38:41,879 - WARNING - Failed to create cache directory cache: 'str' object has no attribute 'mkdir'
2025-07-14 15:38:42,581 - INFO - MPS environment configured for compatibility
2025-07-14 15:38:42,581 - INFO - Application started with enhanced MPS support.
2025-07-14 15:38:42,581 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:38:42,581 - INFO - Loading Model tiiuae/falcon-rw-1b with MPS compatibility...
2025-07-14 15:38:42,581 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:38:43,297 - INFO - Added padding token to tokenizer.
2025-07-14 15:38:43,297 - INFO - Tokenizer loaded successfully.
2025-07-14 15:38:43,297 - INFO - Loading model with MPS-specific optimizations...
2025-07-14 15:38:50,195 - INFO - Model successfully loaded and converted for MPS
2025-07-14 15:38:50,195 - INFO - Model loading completed successfully
2025-07-14 15:38:50,196 - INFO - Performance complete_model_loading: 7.61s, Memory: -395.4MB, GPU: +0.0MB
2025-07-14 15:38:50,196 - INFO - Performance startup_model_loading: 7.62s, Memory: -395.2MB, GPU: +0.0MB
2025-07-14 15:39:02,250 - INFO - User selected configuration: method=simple, source=wikipedia:20220301.en
2025-07-14 15:39:02,251 - INFO - Loading Vector DB with method: simple, source: wikipedia:20220301.en
2025-07-14 15:39:02,255 - INFO - Loading vector database for source_path: 'wikipedia:20220301.en', storing_method: 'simple'
2025-07-14 15:39:09,846 - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-07-14 15:39:10,443 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:39:11,802 - INFO - Loading SentenceTransformer for MPS with float32
2025-07-14 15:41:44,878 - INFO - Performance vector_db_loading: 162.63s, Memory: +72.2MB, GPU: +0.0MB
2025-07-14 15:41:44,878 - INFO - Application interrupted by user
2025-07-14 15:41:44,879 - INFO - Performance metrics saved to results/performance_metrics.json
2025-07-14 15:41:44,879 - INFO - Performance metrics saved
2025-07-14 15:41:44,880 - INFO - MPS cache cleared
2025-07-14 15:41:56,262 - WARNING - Failed to create cache directory cache/embeddings: 'str' object has no attribute 'mkdir'
2025-07-14 15:41:56,263 - WARNING - Failed to create cache directory cache/queries: 'str' object has no attribute 'mkdir'
2025-07-14 15:41:56,263 - WARNING - Failed to create cache directory cache: 'str' object has no attribute 'mkdir'
2025-07-14 15:41:56,919 - INFO - MPS environment configured for compatibility
2025-07-14 15:41:56,919 - INFO - Application started with enhanced MPS support.
2025-07-14 15:41:56,919 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:41:56,919 - INFO - Loading Model tiiuae/falcon-rw-1b with MPS compatibility...
2025-07-14 15:41:56,919 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:41:58,122 - INFO - Added padding token to tokenizer.
2025-07-14 15:41:58,122 - INFO - Tokenizer loaded successfully.
2025-07-14 15:41:58,122 - INFO - Loading model with MPS-specific optimizations...
2025-07-14 15:42:04,110 - INFO - Model successfully loaded and converted for MPS
2025-07-14 15:42:04,112 - INFO - Model loading completed successfully
2025-07-14 15:42:04,112 - INFO - Performance complete_model_loading: 7.19s, Memory: -333.7MB, GPU: +0.0MB
2025-07-14 15:42:04,112 - INFO - Performance startup_model_loading: 7.19s, Memory: -333.3MB, GPU: +0.0MB
2025-07-14 15:42:23,614 - INFO - User selected configuration: method=simple, source=wikipedia:20220301.en
2025-07-14 15:42:23,615 - INFO - Loading Vector DB with method: simple, source: wikipedia:20220301.en
2025-07-14 15:42:23,616 - INFO - Loading vector database for source_path: 'wikipedia:20220301.en', storing_method: 'simple'
2025-07-14 15:42:26,699 - INFO - Loading HuggingFaceEmbedding with model_name: sentence-transformers/all-MiniLM-L6-v2
2025-07-14 15:42:26,699 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:42:29,750 - INFO - ✅ Embedding model loaded and cached successfully
2025-07-14 15:42:44,095 - INFO - Initializing Simple vector database for source: wikipedia:20220301.en
2025-07-14 15:42:44,095 - INFO - Parsing source path: wikipedia:20220301.en
2025-07-14 15:42:44,096 - INFO - Source type identified as Hugging Face dataset with config: wikipedia_20220301.en
2025-07-14 15:42:44,096 - INFO - Downloading data from Hugging Face into /Users/bardamri/PycharmProjects/ModularRAGOptimization/data/hf_downloads/wikipedia_20220301.en
2025-07-14 15:42:44,096 - INFO - Downloading dataset 'wikipedia' with config '20220301.en' from Hugging Face...
2025-07-14 15:42:54,804 - INFO - Saved 1000 documents to /Users/bardamri/PycharmProjects/ModularRAGOptimization/data/hf_downloads/wikipedia_20220301.en
2025-07-14 15:42:54,829 - INFO - Creating new Simple vector database from /Users/bardamri/PycharmProjects/ModularRAGOptimization/data/hf_downloads/wikipedia_20220301.en
2025-07-14 15:43:59,221 - INFO - Persisting Simple vector database to /Users/bardamri/PycharmProjects/ModularRAGOptimization/storage/simple/wikipedia_20220301.en
2025-07-14 15:44:46,409 - INFO - Indexed 1000 documents into Simple vector DB
2025-07-14 15:44:46,410 - INFO - Simple VectorDB initialized successfully with VectorStoreIndex
2025-07-14 15:45:04,528 - INFO - ✅ Vector database interface created successfully using simple method
2025-07-14 15:45:05,463 - INFO - Database stats: {'db_type': 'simple', 'storage_dir': '/Users/bardamri/PycharmProjects/ModularRAGOptimization/storage/simple/wikipedia_20220301.en', 'embedding_model': 'sentence-transformers/all-MiniLM-L6-v2', 'index_exists': True, 'document_count': 6855}
2025-07-14 15:45:07,376 - INFO - Performance vector_db_loading: 163.76s, Memory: +607.0MB, GPU: +0.0MB
2025-07-14 15:45:22,198 - INFO - Processing query with SimilarityMethod.COSINE similarity
2025-07-14 15:45:22,199 - INFO - Moving model from mps:0 to mps
2025-07-14 15:45:22,206 - INFO - Retrieving context using SimilarityMethod.COSINE similarity
2025-07-14 15:45:22,766 - INFO - LlamaIndex retrieved 5 initial candidates
2025-07-14 15:45:22,767 - INFO - Performance llamaindex_retrieval: 0.56s, Memory: +33.8MB, GPU: +0.0MB
2025-07-14 15:45:22,784 - INFO - Performance embedding_generation: 0.02s, Memory: +0.0MB, GPU: +0.0MB
2025-07-14 15:45:22,785 - INFO - Performance query_embedding: 0.02s, Memory: +0.2MB, GPU: +0.0MB
2025-07-14 15:45:22,814 - INFO - Performance embedding_generation: 0.03s, Memory: +5.1MB, GPU: +0.0MB
2025-07-14 15:45:22,832 - INFO - Performance embedding_generation: 0.02s, Memory: +0.3MB, GPU: +0.0MB
2025-07-14 15:45:22,854 - INFO - Performance embedding_generation: 0.02s, Memory: +0.0MB, GPU: +0.0MB
2025-07-14 15:45:22,876 - INFO - Performance embedding_generation: 0.02s, Memory: +0.0MB, GPU: +0.0MB
2025-07-14 15:45:22,896 - INFO - Performance embedding_generation: 0.02s, Memory: +0.1MB, GPU: +0.0MB
2025-07-14 15:45:22,896 - INFO - Performance batch_embedding_generation: 0.11s, Memory: +5.5MB, GPU: +0.0MB
2025-07-14 15:45:22,896 - INFO - Performance document_embedding_extraction: 0.11s, Memory: +5.5MB, GPU: +0.0MB
2025-07-14 15:45:22,898 - INFO - Similarity score comparison:
2025-07-14 15:45:22,898 - INFO - Doc 0: Manual=0.424887, Reference=0.424887, Diff=0.000000
2025-07-14 15:45:22,898 - INFO - Doc 1: Manual=0.394635, Reference=0.394635, Diff=0.000000
2025-07-14 15:45:22,898 - INFO - Doc 2: Manual=0.373459, Reference=0.373459, Diff=0.000000
2025-07-14 15:45:22,898 - INFO - Doc 3: Manual=0.355358, Reference=0.355358, Diff=0.000000
2025-07-14 15:45:22,898 - INFO - Doc 4: Manual=0.344668, Reference=0.344668, Diff=0.000000
2025-07-14 15:45:22,898 - INFO - Performance similarity_calculation: 0.00s, Memory: +0.1MB, GPU: +0.0MB
2025-07-14 15:45:22,898 - WARNING - No results above similarity threshold 0.5
2025-07-14 15:45:22,898 - INFO - Performance result_filtering_and_ranking: 0.00s, Memory: +0.0MB, GPU: +0.0MB
2025-07-14 15:45:22,898 - INFO - Retrieved 0 relevant documents
2025-07-14 15:45:22,899 - INFO - Performance context_retrieval: 0.69s, Memory: +39.5MB, GPU: +0.0MB
2025-07-14 15:45:22,899 - INFO - Performance context_retrieval_and_prompt_construction: 0.69s, Memory: +39.5MB, GPU: +0.0MB
2025-07-14 15:45:22,899 - INFO - Performance preparing_query_context: 0.69s, Memory: +39.5MB, GPU: +0.0MB
2025-07-14 15:45:31,307 - INFO - Evaluating answer quality
2025-07-14 15:45:31,307 - INFO - Quality score: 1.0
2025-07-14 15:45:31,307 - INFO - Performance answer_quality_evaluation: 0.00s, Memory: +0.0MB, GPU: +0.0MB
2025-07-14 15:45:31,307 - INFO - Performance answer_processing: 0.00s, Memory: +1.1MB, GPU: +0.0MB
2025-07-14 15:45:31,307 - INFO - Performance single_answer_generating: 9.10s, Memory: +679.9MB, GPU: +0.0MB
2025-07-14 15:45:31,307 - INFO - Query processing completed successfully
2025-07-14 15:45:31,308 - INFO - Performance complete_query_processing: 9.11s, Memory: +680.3MB, GPU: +0.0MB
2025-07-14 15:45:31,308 - INFO - Question: what is the capital of france ?, Answer: Paris. The French word for “capital”, parisien (from Latin pauper), means poor or beggarly person and refers to a place where people live in poverty; it was originally used as an insult by Roman soldiers
2025-07-14 15:45:31,308 - INFO - Performance interactive_query: 9.12s, Memory: +680.5MB, GPU: +0.0MB
2025-07-14 15:45:45,342 - INFO - Performance interactive_mode: 30.12s, Memory: +503.5MB, GPU: +0.0MB
2025-07-14 15:45:53,034 - INFO - Performance metrics saved to results/performance_metrics.json
2025-07-14 15:45:53,035 - INFO - Performance metrics saved
2025-07-14 15:45:53,071 - INFO - MPS cache cleared
2025-07-14 15:53:05,456 - WARNING - Failed to create cache directory cache/embeddings: 'str' object has no attribute 'mkdir'
2025-07-14 15:53:05,456 - WARNING - Failed to create cache directory cache/queries: 'str' object has no attribute 'mkdir'
2025-07-14 15:53:05,456 - WARNING - Failed to create cache directory cache: 'str' object has no attribute 'mkdir'
2025-07-14 15:54:32,886 - WARNING - Failed to create cache directory cache/embeddings: 'str' object has no attribute 'mkdir'
2025-07-14 15:54:32,887 - WARNING - Failed to create cache directory cache/queries: 'str' object has no attribute 'mkdir'
2025-07-14 15:54:32,887 - WARNING - Failed to create cache directory cache: 'str' object has no attribute 'mkdir'
2025-07-14 15:55:54,601 - WARNING - Failed to create cache directory cache/embeddings: 'str' object has no attribute 'mkdir'
2025-07-14 15:55:54,601 - WARNING - Failed to create cache directory cache/queries: 'str' object has no attribute 'mkdir'
2025-07-14 15:55:54,601 - WARNING - Failed to create cache directory cache: 'str' object has no attribute 'mkdir'
2025-07-14 15:56:42,038 - WARNING - Failed to create cache directory cache/embeddings: 'str' object has no attribute 'mkdir'
2025-07-14 15:56:42,038 - WARNING - Failed to create cache directory cache/queries: 'str' object has no attribute 'mkdir'
2025-07-14 15:56:42,038 - WARNING - Failed to create cache directory cache: 'str' object has no attribute 'mkdir'
2025-07-14 15:56:42,669 - INFO - MPS environment configured for compatibility
2025-07-14 15:56:42,669 - INFO - Application started with enhanced MPS support.
2025-07-14 15:56:42,670 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:56:42,670 - INFO - Loading Model tiiuae/falcon-rw-1b with MPS compatibility...
2025-07-14 15:56:42,670 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-14 15:56:43,221 - INFO - Added padding token to tokenizer.
2025-07-14 15:56:43,221 - INFO - Tokenizer loaded successfully.
2025-07-14 15:56:43,221 - INFO - Loading model with MPS-specific optimizations...
2025-07-14 15:56:49,881 - INFO - Model successfully loaded and converted for MPS
2025-07-14 15:56:49,882 - INFO - Model loading completed successfully
2025-07-14 15:56:49,884 - INFO - Performance complete_model_loading: 7.21s, Memory: -387.2MB, GPU: +0.0MB
2025-07-14 15:56:49,884 - INFO - Performance startup_model_loading: 7.21s, Memory: -387.0MB, GPU: +0.0MB
