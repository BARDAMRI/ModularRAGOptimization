2025-07-21 15:20:28,918 - WARNING - Performance monitoring or caching not available
2025-07-21 15:20:28,920 - WARNING - Performance monitoring or caching not available
2025-07-21 15:20:28,937 - WARNING - Performance monitoring or caching not available
2025-07-21 15:20:28,937 - INFO - MPS environment configured for compatibility
2025-07-21 15:20:28,937 - INFO - Application started with enhanced MPS support.
2025-07-21 15:20:28,937 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-21 15:20:28,937 - INFO - Loading Model tiiuae/falcon-rw-1b with MPS compatibility...
2025-07-21 15:20:28,937 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-21 15:20:29,491 - INFO - Added padding token to tokenizer.
2025-07-21 15:20:29,491 - INFO - Tokenizer loaded successfully.
2025-07-21 15:20:29,491 - INFO - Loading model with MPS-specific optimizations...
2025-07-21 15:20:35,966 - INFO - Model successfully loaded and converted for MPS
2025-07-21 15:20:35,967 - INFO - Model loading completed successfully
2025-07-21 15:20:35,968 - INFO - Performance complete_model_loading: 7.03s, Memory: -297.5MB, GPU: +0.0MB
2025-07-21 15:21:50,686 - INFO - User selected configuration: method=simple, source=wikipedia:20220301.en, distance=None
2025-07-21 15:21:50,687 - INFO - Loading Vector DB with method: simple, source: wikipedia:20220301.en, distance: cosine
2025-07-21 15:21:50,687 - INFO - Loading vector database for source_path: 'wikipedia:20220301.en', storing_method: 'simple'
2025-07-21 15:21:50,687 - INFO - Loading HuggingFaceEmbedding with model_name: sentence-transformers/all-mpnet-base-v2
2025-07-21 15:21:50,687 - INFO - MPS (Apple Silicon GPU) detected and enabled
2025-07-21 15:21:53,526 - INFO - ✅ Embedding model loaded and cached successfully
2025-07-21 15:21:53,527 - INFO - Initializing Simple vector database for source: wikipedia:20220301.en
2025-07-21 15:21:53,527 - INFO - Parsing source path: wikipedia:20220301.en
2025-07-21 15:21:53,527 - INFO - Source type identified as HF with config: wikipedia_20220301.en
2025-07-21 15:21:53,527 - INFO - Downloading data from Hugging Face into /Users/bardamri/PycharmProjects/ModularRAGOptimization/data/hf_downloads/wikipedia_20220301.en
2025-07-21 15:21:53,527 - INFO - Downloading dataset 'wikipedia' with config '20220301.en' from Hugging Face...
2025-07-21 15:22:03,297 - INFO - Saved 1000 documents to /Users/bardamri/PycharmProjects/ModularRAGOptimization/data/hf_downloads/wikipedia_20220301.en
2025-07-21 15:22:03,320 - INFO - Creating new Simple vector database from /Users/bardamri/PycharmProjects/ModularRAGOptimization/data/hf_downloads/wikipedia_20220301.en
2025-07-21 15:26:29,363 - INFO - Persisting Simple vector database to /Users/bardamri/PycharmProjects/ModularRAGOptimization/storage/simple/wikipedia_20220301.en/cosine
2025-07-21 15:26:47,501 - INFO - Indexed 1000 documents into Simple vector DB
2025-07-21 15:26:47,501 - INFO - Simple VectorDB initialized successfully with VectorStoreIndex
2025-07-21 15:26:47,510 - INFO - ✅ Vector database interface created successfully using simple method
2025-07-21 15:26:47,946 - INFO - Database stats: {'db_type': 'simple', 'storage_dir': '/Users/bardamri/PycharmProjects/ModularRAGOptimization/storage/simple/wikipedia_20220301.en/cosine', 'embedding_model': 'sentence-transformers/all-mpnet-base-v2', 'index_exists': True, 'document_count': 6855}
2025-07-21 15:27:55,354 - INFO - Simple retrieval with embedding vector
2025-07-21 15:27:55,470 - WARNING - ❌ Failed to retrieve base results for query 1: 'VectorStoreIndex' object has no attribute '_embedding_store'
2025-07-21 15:27:55,567 - INFO - Simple retrieval with embedding vector
2025-07-21 15:27:55,642 - WARNING - ❌ Failed to retrieve base results for query 2: 'VectorStoreIndex' object has no attribute '_embedding_store'
2025-07-21 15:27:55,668 - INFO - Simple retrieval with embedding vector
2025-07-21 15:27:56,032 - WARNING - ❌ Failed to retrieve base results for query 3: 'VectorStoreIndex' object has no attribute '_embedding_store'
2025-07-21 15:27:56,136 - INFO - Simple retrieval with embedding vector
2025-07-21 15:27:56,213 - WARNING - ❌ Failed to retrieve base results for query 4: 'VectorStoreIndex' object has no attribute '_embedding_store'
2025-07-21 15:27:56,314 - INFO - Simple retrieval with embedding vector
2025-07-21 15:27:56,561 - WARNING - ❌ Failed to retrieve base results for query 5: 'VectorStoreIndex' object has no attribute '_embedding_store'
2025-07-21 15:27:56,573 - ERROR - ❌ Failed to write results to file: 'query_index'
Traceback (most recent call last):
  File "/Users/bardamri/PycharmProjects/ModularRAGOptimization/experiments/noise_experiment.py", line 105, in run_noise_experiment
    df_summary = df.groupby(["query_index", "query", "epsilon"]).agg({
  File "/Users/bardamri/PycharmProjects/ModularRAGOptimization/.venv/lib/python3.10/site-packages/pandas/core/frame.py", line 9183, in groupby
    return DataFrameGroupBy(
  File "/Users/bardamri/PycharmProjects/ModularRAGOptimization/.venv/lib/python3.10/site-packages/pandas/core/groupby/groupby.py", line 1329, in __init__
    grouper, exclusions, obj = get_grouper(
  File "/Users/bardamri/PycharmProjects/ModularRAGOptimization/.venv/lib/python3.10/site-packages/pandas/core/groupby/grouper.py", line 1043, in get_grouper
    raise KeyError(gpr)
KeyError: 'query_index'
2025-07-21 15:30:35,107 - INFO - Application interrupted by user
